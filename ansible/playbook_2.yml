---
- hosts: all
  become: true
  pre_tasks:
    - name: test Xen hypervisor
      slurp:
        src: /sys/hypervisor/type
      register: hypertype
      failed_when: hypertype['content'] | b64decode | trim != "xen"
  tasks:
    - name: install useful tools
      package:
        name: "{{ item }}"
      with_items:
        - git
        - htop
        - vim
        - wget
        - ipython3
  roles:
    - libvirt
    - libvmi
    - vmidbg
